<!DOCTYPE html>
<html lang="en" class="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Login | Topic 4</title>
		<script src="https://cdn.tailwindcss.com"></script>
		<script
			src="https://code.jquery.com/jquery-3.7.1.min.js"
			integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
			crossorigin="anonymous"
		></script>
		<style>
			body {
				background-color: #09090b; /* Zinc-950 */
			}
		</style>
		<script>
			$(document).ready(function () {
				$('form').on('submit', function (event) {
					event.preventDefault();

					const username = $('#username').val();
					const password = $('#password').val();

					$.ajax({
						url: '/api/login',
						type: 'POST',
						contentType: 'application/json',
						data: JSON.stringify({ username, password }),
						success: function (response) {
							window.location.href = '/';
						},
						error: function (jqXHR) {
							if (jqXHR.status === 400) {
								$('#error-message').text('Invalid request. Please try again.');
							} else if (jqXHR.status === 401) {
								$('#error-message').text('Invalid username or password.');
							} else if (jqXHR.status === 429) {
								$('#error-message').text(
									'Rate limit exceeded. Please try again later.',
								);
							} else {
								$('#error-message').text(
									'An unexpected error occurred. Please try again.',
								);
							}
						},
					});
				});
			});
		</script>
	</head>
	<body class="flex items-center justify-center min-h-screen px-4">
		<div class="w-full max-w-sm p-6 bg-zinc-900 rounded-2xl shadow-lg">
			<h2 class="text-2xl font-semibold text-zinc-100 mb-6 text-center">Login</h2>
			<div id="error-message" class="text-red-500 mb-4 text-center"></div>
			<form class="space-y-4">
				<div>
					<label class="block text-sm text-zinc-300 mb-1" for="username">Username</label>
					<input
						id="username"
						name="username"
						type="text"
						placeholder="Enter username"
						class="w-full px-4 py-2 bg-zinc-800 text-zinc-100 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-zinc-500"
					/>
				</div>
				<div>
					<label class="block text-sm text-zinc-300 mb-1" for="password">Password</label>
					<input
						id="password"
						name="password"
						type="password"
						placeholder="Enter password"
						class="w-full px-4 py-2 bg-zinc-800 text-zinc-100 rounded-lg border border-zinc-700 focus:outline-none focus:ring-2 focus:ring-zinc-500"
					/>
				</div>
				<button
					type="submit"
					class="w-full py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg transition-colors"
				>
					Sign In
				</button>
			</form>
		</div>
	</body>
</html>
